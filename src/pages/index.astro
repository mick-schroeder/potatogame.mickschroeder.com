---
import "../styles/global.css";
import { Badge } from "../components/ui/badge";
import { Button } from "../components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "../components/ui/card";
import { defaultLocale, getStrings } from "../i18n/strings";

const locale = Astro.currentLocale ?? defaultLocale;
const t = getStrings(locale);
const localizedPath = locale === defaultLocale ? "" : `/${locale}`;

const appStoreUrl = "https://apps.apple.com/app/id0000000000";
const macAppStoreUrl = "https://apps.apple.com/us/app/id0000000000?platform=mac";
const githubUrl = "https://github.com/mickschroeder/potatogame";
const authorUrl = "https://mickschroeder.com";
const privacyPath = `${localizedPath}/privacy-policy/`;
const privacyUrl = `https://potatogame.mickschroeder.com${privacyPath}`;
const downloadPath = `${localizedPath}#download`;
---

<html lang={locale} class="scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{t.metaTitle}</title>
		<meta
			name="description"
			content={t.metaDescription}
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			:global(body) {
				font-family: "Space Grotesk", "Manrope", "DM Sans", system-ui, -apple-system, sans-serif;
				background-color: #1a0f0b;
			}
			:global(.glass-card) {
				background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
				border: 1px solid rgba(255, 255, 255, 0.08);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.05);
				backdrop-filter: blur(10px);
			}
		</style>
	</head>

	<body class="min-h-screen bg-gradient-to-b from-[#1a0f0b] via-[#2c1a13] to-[#5a3f2b] text-amber-50 antialiased">
		<div class="absolute inset-0 -z-10 overflow-hidden">
			<div class="absolute -left-24 -top-24 h-72 w-72 rounded-full bg-gradient-to-br from-[#f6c899]/40 via-[#b57b4f]/40 to-transparent blur-3xl" />
			<div class="absolute bottom-10 right-0 h-96 w-96 rounded-full bg-gradient-to-tr from-[#734b2f]/40 via-[#f7d29a]/30 to-transparent blur-3xl" />
			<div class="absolute inset-0 bg-[radial-gradient(circle_at_10%_20%,rgba(255,255,255,0.04),transparent_35%),radial-gradient(circle_at_90%_10%,rgba(255,255,255,0.05),transparent_30%),radial-gradient(circle_at_50%_80%,rgba(0,0,0,0.25),transparent_35%)]" />
		</div>

		<header class="relative mx-auto flex max-w-6xl items-center justify-between gap-4 px-6 py-8">
			<a class="flex items-center gap-3 hover:opacity-90 transition" href="/">
				<img
					src="/Potato Game-iOS-Default-1024x1024@1x.png"
					alt="Potato Game app icon"
					class="h-12 w-12 rounded-2xl shadow-lg shadow-black/30"
					loading="lazy"
				/>
				<div>
					<p class="text-sm uppercase tracking-[0.2em] text-amber-200/70">Potato Game</p>
					<p class="text-lg font-semibold text-amber-50">{t.brandSubtitle}</p>
				</div>
			</a>
			<nav class="hidden items-center gap-6 text-sm font-semibold text-amber-100/80 md:flex">
				<a class="hover:text-amber-100" href="/">{t.navHome ?? "Home"}</a>
				<a class="hover:text-amber-100" href="#features">{t.navFeatures}</a>
				<a class="hover:text-amber-100" href={privacyPath}>{t.navPrivacy}</a>
				<a class="hover:text-amber-100" href={authorUrl} rel="noreferrer">{t.navAuthor}</a>
				<a href={appStoreUrl} rel="noreferrer" class="btn btn-outline">{t.navCta}</a>
			</nav>
			<div class="flex items-center gap-3 md:hidden">
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href="/">{t.navHome ?? "Home"}</a>
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href="#features">{t.navFeatures}</a>
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={privacyPath}>{t.navPrivacy}</a>
				<a href={appStoreUrl} rel="noreferrer" class="btn btn-outline">{t.navCta}</a>
			</div>
		</header>

		<main class="relative mx-auto flex max-w-6xl flex-col gap-16 px-6 pb-20 md:pb-28">
			<section class="grid items-center gap-12 md:grid-cols-[1.1fr_0.9fr]">
				<div class="space-y-8">
					<div class="flex flex-wrap items-center gap-3">
						<Badge className="bg-white/10 text-amber-100 ring-1 ring-white/15 px-4 py-2 uppercase tracking-[0.18em]">
							<span class="mr-2 inline-block h-2 w-2 rounded-full bg-amber-300" aria-hidden="true"></span>
							{t.heroBadges.primary}
						</Badge>
						<Badge className="bg-white/10 text-amber-100 ring-1 ring-white/15 px-4 py-2 uppercase tracking-[0.18em]">
							<span class="mr-2 inline-block h-2 w-2 rounded-full bg-emerald-300" aria-hidden="true"></span>
							{t.heroBadges.secondary}
						</Badge>
					</div>
					<div class="space-y-4">
						<h1 class="text-balance text-4xl font-bold leading-tight text-amber-50 sm:text-5xl md:text-6xl">
							{t.heroTitle}
						</h1>
						<p class="max-w-2xl text-lg leading-relaxed text-amber-100/80">
							{t.heroBody}
						</p>
					</div>
					<div class="flex flex-wrap items-center gap-4">
						<a href={appStoreUrl} rel="noreferrer" class="inline-block">
							<img
								src="/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg"
								alt={t.ctaDownload}
								class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
							/>
						</a>
						<a href={macAppStoreUrl} rel="noreferrer" class="inline-block">
							<img
								src="/Download_on_the_Mac_App_Store_Badge_US-UK_RGB_blk_092917.svg"
								alt="Download on the Mac App Store"
								class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
							/>
						</a>
						<a href={githubUrl} rel="noreferrer" class="btn btn-outline px-6 py-3 text-base">
							{t.ctaGithub}
						</a>
						<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={authorUrl} rel="noreferrer">
							{t.ctaAuthor}
						</a>
					</div>
					
				</div>

				<div class="relative">
					<div class="absolute -inset-6 rounded-[28px] bg-gradient-to-br from-white/10 via-white/5 to-transparent blur-2xl" aria-hidden="true"></div>
					<div class="relative glass-card rounded-[24px] p-6">
						<div class="flex items-center justify-between gap-4 rounded-xl bg-[#25160f]/80 px-4 py-3 text-xs font-semibold uppercase tracking-[0.18em] text-amber-200/80 ring-1 ring-white/10">
							<span>{t.cardEyebrow}</span>
							<span class="rounded-full bg-amber-400/15 px-3 py-1 text-[11px] text-amber-50 ring-1 ring-amber-300/30">{t.cardPill}</span>
						</div>
						<div class="mt-6 flex flex-col items-center gap-4 rounded-2xl bg-gradient-to-b from-[#2f1d14] to-[#3c271a] p-6 ring-1 ring-white/10">
							<img
								src="/Potato Game-iOS-Default-1024x1024@1x.png"
								alt="Potato Game icon"
								class="h-32 w-32 rounded-3xl shadow-2xl shadow-black/50"
								loading="lazy"
							/>
							<div class="text-center">
								<p class="text-sm font-semibold uppercase tracking-[0.12em] text-amber-200/80">{t.cardLevel}</p>
								<p class="text-3xl font-bold text-amber-50">{t.cardGoal}</p>
								<p class="mt-1 text-sm text-amber-100/70">{t.cardHint}</p>
							</div>
							<div class="mt-3 grid w-full grid-cols-2 gap-3 text-left text-sm text-amber-100/80">
								<div class="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
									<p class="text-xs uppercase tracking-[0.14em] text-amber-200/70">{t.cardBoost.label}</p>
									<p class="text-lg font-semibold text-amber-50">{t.cardBoost.value}</p>
								</div>
								<div class="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
									<p class="text-xs uppercase tracking-[0.14em] text-amber-200/70">{t.cardTimer.label}</p>
									<p class="text-lg font-semibold text-amber-50">{t.cardTimer.value}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<section id="features" class="space-y-8">
				<div class="flex flex-col gap-3">
					<p class="text-sm font-semibold uppercase tracking-[0.2em] text-amber-200/70">{t.featuresEyebrow}</p>
					<h2 class="text-3xl font-bold text-amber-50 sm:text-4xl">{t.featuresTitle}</h2>
					<p class="max-w-3xl text-lg leading-relaxed text-amber-100/80">{t.featuresLead}</p>
				</div>
				<div class="grid gap-6 md:grid-cols-2">
					{t.features.map((feature) => (
						<div class="glass-card rounded-2xl p-6">
							<div class="flex items-start justify-between gap-3">
								<div>
									<p class="text-lg font-semibold text-amber-50">{feature.name}</p>
									<p class="mt-2 text-sm leading-relaxed text-amber-100/70">{feature.body}</p>
								</div>
								<span class="h-3 w-3 rounded-full bg-amber-300 shadow shadow-amber-900/40" aria-hidden="true"></span>
							</div>
						</div>
					))}
				</div>
			</section>

			<section class="grid gap-6 rounded-2xl border border-white/10 bg-white/5 p-6 shadow-inner shadow-black/30 backdrop-blur md:grid-cols-3">
				{t.stats.map((item) => (
					<Card className="border-white/10 bg-white/5 text-amber-50 shadow-inner shadow-black/20">
						<CardHeader>
							<CardTitle className="text-xs uppercase tracking-[0.18em] text-amber-200/70">{item.label}</CardTitle>
							<CardDescription className="text-amber-50 text-2xl font-bold">{item.title}</CardDescription>
						</CardHeader>
						<CardContent className="text-sm text-amber-100/70">{item.body}</CardContent>
					</Card>
				))}
			</section>

			<section class="glass-card rounded-3xl p-8 ring-1 ring-white/10">
				<div class="flex flex-col gap-4">
					<div class="space-y-2">
						<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.screenshotsTitle}</p>
						<p class="max-w-2xl text-sm text-amber-100/80">{t.screenshotsLead}</p>
					</div>
					<div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
						{["Screenshot 1.png", "Screenshot 2.png", "Screenshot 3.png", "Screenshot 4.png"].map((file) => (
							<div class="flex items-center justify-center overflow-hidden rounded-2xl border border-white/10 bg-[#1f140d]/80 shadow-lg shadow-black/30">
								<img
									src={`/${encodeURI(file)}`}
									alt={`${t.screenshotsTitle} ${file}`}
									loading="lazy"
									class="h-80 w-full object-contain p-3 transition duration-500 hover:scale-[1.02] sm:h-96"
								/>
							</div>
						))}
					</div>
				</div>
			</section>

			<section id="download" class="glass-card rounded-3xl p-8 ring-1 ring-white/10">
				<div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
					<div class="space-y-2">
						<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.navDownload}</p>
						<h2 class="text-3xl font-bold text-amber-50 sm:text-4xl">{t.ctaDownload}</h2>
						<p class="text-sm text-amber-100/80">Use the iOS or Mac App Store badge to install Potato Game.</p>
					</div>
					<div class="flex flex-wrap items-center gap-4">
						<a href={appStoreUrl} rel="noreferrer" class="inline-block">
							<img
								src="/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg"
								alt={t.ctaDownload}
								class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
							/>
						</a>
						<a href={macAppStoreUrl} rel="noreferrer" class="inline-block">
							<img
								src="/Download_on_the_Mac_App_Store_Badge_US-UK_RGB_blk_092917.svg"
								alt="Download on the Mac App Store"
								class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
							/>
						</a>
					</div>
				</div>
			</section>

			<section class="space-y-6 rounded-2xl border border-white/10 bg-gradient-to-r from-[#2a1a12] to-[#352015] p-6 shadow-lg shadow-black/30">
				<div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
					<div class="space-y-1">
						<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.openSource.eyebrow}</p>
						<h3 class="text-2xl font-bold text-amber-50">{t.openSource.title}</h3>
						<p class="text-sm text-amber-100/80">{t.openSource.body}</p>
					</div>
					<a href={githubUrl} rel="noreferrer" class="btn btn-outline px-5 py-3 text-base">
						{t.openSource.button}
					</a>
				</div>
			</section>

			<section id="privacy-policy" class="space-y-4 rounded-2xl border border-white/10 bg-white/5 p-6 shadow-inner shadow-black/30 backdrop-blur">
				<div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
					<div>
						<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.privacy.eyebrow}</p>
						<h3 class="text-2xl font-bold text-amber-50">{t.privacy.title}</h3>
						<p class="text-sm text-amber-100/80">{t.privacy.lead}</p>
					</div>
					<a href={privacyPath} class="btn btn-primary text-sm">
						{t.privacy.copyLink}
					</a>
				</div>
			</section>
		</main>

		<footer class="border-t border-white/10 bg-[#1a0f0b]/80">
			<div class="mx-auto flex max-w-6xl flex-col gap-4 px-6 py-6 text-sm text-amber-100/80 md:flex-row md:items-center md:justify-between">
				<div class="space-y-1">
					<p class="font-semibold text-amber-50">Potato Game</p>
					<p class="text-amber-100/70">{t.footerBlurb}</p>
				</div>
				<div class="flex flex-wrap items-center gap-4">
					<a class="hover:text-amber-50" href={appStoreUrl} rel="noreferrer">{t.footerLinks.appStore}</a>
					<a class="hover:text-amber-50" href={githubUrl} rel="noreferrer">{t.footerLinks.github}</a>
					<a class="hover:text-amber-50" href={authorUrl} rel="noreferrer">{t.footerLinks.author}</a>
					<a class="hover:text-amber-50" href={privacyPath}>{t.footerLinks.privacy}</a>
				</div>
			</div>
		</footer>
	</body>
</html>
