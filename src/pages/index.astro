---
import BaseLayout from "../layouts/base.astro";
import { Badge } from "../components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "../components/ui/card";
import { Image } from "astro:assets";
import screenshot1 from "../assets/screenshot-1.png";
import screenshot2 from "../assets/screenshot-2.png";
import screenshot3 from "../assets/screenshot-3.png";
import screenshot4 from "../assets/screenshot-4.png";
import { defaultLocale, getStrings } from "../i18n/strings";
import { siteConfig } from "../config/site";

const locale = Astro.currentLocale ?? defaultLocale;
const t = getStrings(locale);
const localizedPath = locale === defaultLocale ? "" : `/${locale}`;

const appStoreUrl = siteConfig.appStoreUrl;
const macAppStoreUrl = siteConfig.macAppStoreUrl;
const githubUrl = siteConfig.githubUrl;
const authorUrl = siteConfig.authorUrl;
const privacyPath = `${localizedPath}/privacy-policy/`;

const screenshots = [
	{ src: screenshot1, label: "Screenshot 1" },
	{ src: screenshot2, label: "Screenshot 2" },
	{ src: screenshot3, label: "Screenshot 3" },
	{ src: screenshot4, label: "Screenshot 4" },
];
---

<BaseLayout
	title={t.metaTitle}
	description={t.metaDescription}
	t={t}
	localizedPath={localizedPath}
	appStoreUrl={appStoreUrl}
	githubUrl={githubUrl}
	authorUrl={authorUrl}
	privacyPath={privacyPath}
>
	<section class="grid items-center gap-12 md:grid-cols-[1.1fr_0.9fr]">
		<div class="space-y-8">
			<div class="flex flex-wrap items-center gap-3">
				<Badge className="bg-white/10 text-amber-100 ring-1 ring-white/15 px-4 py-2 uppercase tracking-[0.18em]">
					<span class="mr-2 inline-block h-2 w-2 rounded-full bg-amber-300" aria-hidden="true"></span>
					{t.heroBadges.primary}
				</Badge>
				<Badge className="bg-white/10 text-amber-100 ring-1 ring-white/15 px-4 py-2 uppercase tracking-[0.18em]">
					<span class="mr-2 inline-block h-2 w-2 rounded-full bg-emerald-300" aria-hidden="true"></span>
					{t.heroBadges.secondary}
				</Badge>
			</div>
			<div class="space-y-4">
				<h1 class="text-balance text-4xl font-bold leading-tight text-amber-50 sm:text-5xl md:text-6xl">
					{t.heroTitle}
				</h1>
				<p class="max-w-2xl text-lg leading-relaxed text-amber-100/80">
					{t.heroBody}
				</p>
			</div>
			<div class="flex flex-wrap items-center gap-4">
				
				<a href={githubUrl} rel="noreferrer" class="btn btn-outline px-6 py-3 text-base">
					{t.ctaGithub}
				</a>
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={authorUrl} rel="noreferrer">
					{t.ctaAuthor}
				</a>
			</div>

		</div>

		<div class="relative">
			<div class="absolute -inset-6 rounded-[28px] bg-gradient-to-br from-white/10 via-white/5 to-transparent blur-2xl" aria-hidden="true"></div>
			<div class="relative glass-card rounded-[24px] p-6">
				<div class="mt-6 flex flex-col items-center gap-4 rounded-2xl bg-gradient-to-b from-[#2f1d14] to-[#3c271a] p-6 ring-1 ring-white/10">
					<img
						src="/Potato Game-iOS-Default-1024x1024@1x.png"
						alt="Potato Game icon"
						class="h-32 w-32 rounded-3xl shadow-2xl shadow-black/50"
						loading="lazy"
					/>
					<div class="text-center">
						<p class="text-sm font-semibold uppercase tracking-[0.12em] text-amber-200/80">{t.cardLevel}</p>
						<p class="text-3xl font-bold text-amber-50">{t.cardGoal}</p>
						<p class="mt-1 text-sm text-amber-100/70">{t.cardHint}</p>
					</div>
				</div>
			<div class="flex flex-wrap items-center justify-center gap-4 pt-6">
				<a href={appStoreUrl} rel="noreferrer" class="inline-block">
					<img
						src="/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg"
						alt={t.ctaDownload}
						aria-label="Download on the App Store"
						class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
					/>
				</a>
				<a href={macAppStoreUrl} rel="noreferrer" class="inline-block">
					<img
						src="/Download_on_the_Mac_App_Store_Badge_US-UK_RGB_blk_092917.svg"
						alt="Download on the Mac App Store"
						aria-label="Download on the Mac App Store"
						class="h-12 w-auto drop-shadow-lg transition hover:scale-[1.02] hover:drop-shadow-2xl"
					/>
				</a>
</div>
			</div>
		</div>
	</section>

	<section id="features" class="space-y-8">
		<div class="flex flex-col gap-3">
			<p class="text-sm font-semibold uppercase tracking-[0.2em] text-amber-200/70">{t.featuresEyebrow}</p>
			<h2 class="text-3xl font-bold text-amber-50 sm:text-4xl">{t.featuresTitle}</h2>
			<p class="max-w-3xl text-lg leading-relaxed text-amber-100/80">{t.featuresLead}</p>
		</div>
		<div class="grid gap-6 md:grid-cols-2">
			{t.features.map((feature) => (
				<div class="glass-card rounded-2xl p-6">
					<div class="flex items-start justify-between gap-3">
						<div>
							<p class="text-lg font-semibold text-amber-50">{feature.name}</p>
							<p class="mt-2 text-sm leading-relaxed text-amber-100/70">{feature.body}</p>
						</div>
						<span class="h-3 w-3 rounded-full bg-amber-300 shadow shadow-amber-900/40" aria-hidden="true"></span>
					</div>
				</div>
			
			))}
		</div>
	</section>

	<section class="grid gap-6 rounded-2xl border border-white/10 bg-white/5 p-6 shadow-inner shadow-black/30 backdrop-blur md:grid-cols-3">
		{t.stats.map((item) => (
			<Card className="border-white/10 bg-white/5 text-amber-50 shadow-inner shadow-black/20">
				<CardHeader>
					<CardTitle className="text-xs uppercase tracking-[0.18em] text-amber-200/70">{item.label}</CardTitle>
					<CardDescription className="text-amber-50 text-2xl font-bold">{item.title}</CardDescription>
				</CardHeader>
				<CardContent className="text-sm text-amber-100/70">{item.body}</CardContent>
			</Card>
		))}
	</section>

	<section class="glass-card rounded-3xl p-8 ring-1 ring-white/10">
		<div class="flex flex-col gap-4">
			<div class="space-y-2">
				<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.screenshotsTitle}</p>
				<p class="max-w-2xl text-sm text-amber-100/80">{t.screenshotsLead}</p>
			</div>
			<div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
				{screenshots.map((shot) => (
					<div class="flex items-center justify-center overflow-hidden rounded-2xl border border-white/10 bg-[#1f140d]/80 shadow-lg shadow-black/30">
						<Image
							src={shot.src}
							alt={`${t.screenshotsTitle} ${shot.label}`}
							widths={[480, 720, 1080]}
							formats={["avif", "webp", "png"]}
							class="h-80 w-full object-contain p-3 transition duration-500 hover:scale-[1.02] sm:h-96"
							loading="lazy"
						/>
					</div>
				))}
			</div>
		</div>
	</section>

	<section class="space-y-6 rounded-2xl border border-white/10 bg-gradient-to-r from-[#2a1a12] to-[#352015] p-6 shadow-lg shadow-black/30">
		<div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
			<div class="space-y-1">
				<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.openSource.eyebrow}</p>
				<h3 class="text-2xl font-bold text-amber-50">{t.openSource.title}</h3>
				<p class="text-sm text-amber-100/80">{t.openSource.body}</p>
			</div>
			<a href={githubUrl} rel="noreferrer" class="btn btn-outline px-5 py-3 text-base">
				{t.openSource.button}
			</a>
		</div>
	</section>

	<section id="privacy-policy" class="space-y-4 rounded-2xl border border-white/10 bg-white/5 p-6 shadow-inner shadow-black/30 backdrop-blur">
		<div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
			<div>
				<p class="text-sm font-semibold uppercase tracking-[0.18em] text-amber-200/70">{t.privacy.eyebrow}</p>
				<h3 class="text-2xl font-bold text-amber-50">{t.privacy.title}</h3>
				<p class="text-sm text-amber-100/80">{t.privacy.lead}</p>
			</div>
			<a href={privacyPath} class="btn btn-primary text-sm">
				{t.privacy.copyLink}
			</a>
		</div>
	</section>
</BaseLayout>
