---
import "../styles/global.css";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button"
import { defaultLocale, getStrings } from "../i18n/strings";

const { title = "Potato Game", description } = Astro.props;
const locale = Astro.currentLocale ?? defaultLocale;
const t = getStrings(locale);
const localizedPath = locale === defaultLocale ? "" : `/${locale}`;
const homePath = `${localizedPath}/`;
const privacyPath = `${localizedPath}/privacy-policy/`;

const appStoreUrl = "https://apps.apple.com/app/id0000000000";
const githubUrl = "https://github.com/mickschroeder/potatogame";
const authorUrl = "https://mickschroeder.com";
---

<html lang={locale} class="scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title} | Potato Game</title>
		<meta name="description" content={description ?? t.metaDescription} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			:global(body) {
				font-family: "Space Grotesk", "Manrope", "DM Sans", system-ui, -apple-system, sans-serif;
				background-color: #1a0f0b;
			}
			:global(.glass-card) {
				background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
				border: 1px solid rgba(255, 255, 255, 0.08);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.05);
				backdrop-filter: blur(10px);
			}
			:global(.prose) {
				color: #fef3c7;
				line-height: 1.7;
			}
			:global(.prose h1),
			:global(.prose h2),
			:global(.prose h3),
			:global(.prose h4) {
				color: #fff7d6;
				margin-top: 1.8rem;
				margin-bottom: 0.75rem;
				letter-spacing: -0.01em;
				line-height: 1.2;
			}
			:global(.prose h1) { font-size: clamp(2rem, 3vw, 2.75rem); }
			:global(.prose h2) { font-size: clamp(1.5rem, 2.5vw, 2rem); }
			:global(.prose h3) { font-size: 1.25rem; }
			:global(.prose p) {
				color: #fef3c7;
				margin-bottom: 0.9rem;
			}
			:global(.prose a) {
				color: #fbd38d;
				text-decoration: underline;
				text-decoration-thickness: 1.5px;
				text-underline-offset: 3px;
			}
			:global(.prose ul),
			:global(.prose ol) {
				margin: 0 0 1.25rem 1.2rem;
				padding-left: 1.1rem;
				color: #fde68a;
			}
			:global(.prose li) {
				margin: 0.35rem 0;
			}
			:global(.prose strong) {
				color: #fff7d6;
			}
			:global(.prose blockquote) {
				margin: 1.5rem 0;
				padding-left: 1rem;
				border-left: 3px solid rgba(255, 255, 255, 0.4);
				color: #fef3c7;
				opacity: 0.9;
			}
			:global(.prose code) {
				background: rgba(255, 255, 255, 0.08);
				padding: 0.15rem 0.35rem;
				border-radius: 0.35rem;
				color: #fff7d6;
				font-size: 0.9em;
			}
		</style>
	</head>

	<body class="min-h-screen bg-gradient-to-b from-[#1a0f0b] via-[#2c1a13] to-[#5a3f2b] text-amber-50 antialiased">
		<div class="absolute inset-0 -z-10 overflow-hidden">
			<div class="absolute -left-24 -top-24 h-72 w-72 rounded-full bg-gradient-to-br from-[#f6c899]/40 via-[#b57b4f]/40 to-transparent blur-3xl" />
			<div class="absolute bottom-10 right-0 h-96 w-96 rounded-full bg-gradient-to-tr from-[#734b2f]/40 via-[#f7d29a]/30 to-transparent blur-3xl" />
			<div class="absolute inset-0 bg-[radial-gradient(circle_at_10%_20%,rgba(255,255,255,0.04),transparent_35%),radial-gradient(circle_at_90%_10%,rgba(255,255,255,0.05),transparent_30%),radial-gradient(circle_at_50%_80%,rgba(0,0,0,0.25),transparent_35%)]" />
		</div>

		<header class="relative mx-auto flex max-w-6xl items-center justify-between gap-4 px-6 py-8">
			<a class="flex items-center gap-3 hover:opacity-90 transition" href={homePath}>
				<img
					src="/Potato Game-iOS-Default-1024x1024@1x.png"
					alt="Potato Game app icon"
					class="h-12 w-12 rounded-2xl shadow-lg shadow-black/30"
					loading="lazy"
				/>
				<div>
					<p class="text-sm uppercase tracking-[0.2em] text-amber-200/70">Potato Game</p>
					<p class="text-lg font-semibold text-amber-50">{t.brandSubtitle}</p>
				</div>
			</a>
			<nav class="hidden items-center gap-6 text-sm font-semibold text-amber-100/80 md:flex">
				<a class="hover:text-amber-100" href={homePath}>{t.navHome}</a>
				<a class="hover:text-amber-100" href={`${homePath}#features`}>{t.navFeatures}</a>
				<a class="hover:text-amber-100" href={privacyPath}>{t.navPrivacy}</a>
				<a class="hover:text-amber-100" href={authorUrl} rel="noreferrer">{t.navAuthor}</a>
				<Button
					asChild
					variant="outline"
					size="sm"
					className="bg-amber-300 text-[#1e130c] hover:bg-amber-200 shadow-lg shadow-amber-900/40"
				>
					<a href={appStoreUrl} rel="noreferrer">{t.navCta}</a>
				</Button>
			</nav>
			<div class="flex items-center gap-3 md:hidden">
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={homePath}>{t.navHome}</a>
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={`${homePath}#features`}>{t.navFeatures}</a>
				<a class="text-sm font-semibold text-amber-100/80 underline-offset-4 hover:underline" href={privacyPath}>{t.navPrivacy}</a>
				<Button
					asChild
					size="sm"
					 variant="outline"
					className="bg-amber-300 text-[#1e130c] hover:bg-amber-200 shadow-lg shadow-amber-900/40"
				>
					<a href={appStoreUrl} rel="noreferrer">{t.navCta}</a>
				</Button>
			</div>
		</header>

		<main class="relative mx-auto flex max-w-6xl flex-col gap-10 px-6 pb-20 md:gap-12 md:pb-28">
			<section class="glass-card relative overflow-hidden rounded-3xl p-8 ring-1 ring-white/10">
				<div class="absolute -left-10 -top-10 h-36 w-36 rounded-full bg-amber-300/10 blur-3xl" aria-hidden="true" />
				<div class="absolute -bottom-12 right-6 h-40 w-40 rounded-full bg-amber-500/10 blur-3xl" aria-hidden="true" />
				<div class="relative flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
					<div class="space-y-3">
						<Badge className="bg-white/10 text-amber-100 ring-1 ring-white/15 px-4 py-2 uppercase tracking-[0.18em]">
							{t.navPrivacy}
						</Badge>
						<h1 class="text-4xl font-bold text-amber-50 md:text-5xl">{title}</h1>
						{description && <p class="max-w-3xl text-lg text-amber-100/80">{description}</p>}
					</div>
					<div class="flex flex-wrap items-center gap-3">
					<a href={appStoreUrl} rel="noreferrer" class="btn btn-primary text-base px-4 py-2">
						{t.ctaDownload}
					</a>
					<a href={githubUrl} rel="noreferrer" class="btn btn-outline text-base px-5 py-2">
						{t.ctaGithub}
					</a>
					</div>
				</div>
			</section>

			<section class="glass-card rounded-3xl p-8 ring-1 ring-white/10">
				<article class="prose prose-invert max-w-none space-y-4 prose-headings:text-amber-50 prose-p:text-amber-100/80 prose-strong:text-amber-50 prose-a:text-amber-100">
					<slot />
				</article>
			</section>
		</main>

		<footer class="border-t border-white/10 bg-[#1a0f0b]/80">
			<div class="mx-auto flex max-w-6xl flex-col gap-4 px-6 py-6 text-sm text-amber-100/80 md:flex-row md:items-center md:justify-between">
				<div class="space-y-1">
					<p class="font-semibold text-amber-50">Potato Game</p>
					<p class="text-amber-100/70">{t.footerBlurb}</p>
				</div>
				<div class="flex flex-wrap items-center gap-4">
					<a class="hover:text-amber-50" href={appStoreUrl} rel="noreferrer">{t.footerLinks.appStore}</a>
					<a class="hover:text-amber-50" href={githubUrl} rel="noreferrer">{t.footerLinks.github}</a>
					<a class="hover:text-amber-50" href={authorUrl} rel="noreferrer">{t.footerLinks.author}</a>
					<a class="hover:text-amber-50" href={privacyPath}>{t.footerLinks.privacy}</a>
				</div>
			</div>
		</footer>
	</body>
</html>
